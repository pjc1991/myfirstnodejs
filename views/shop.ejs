<%- include('includes/header.ejs') %>
</head>

<body>
<%- include('includes/navigation.ejs') %>
<main>
    <% if (prods.length > 0) { %>
        <div class="flex flex-wrap justify-center">
            <% for (let product of prods) { %>
                <article class="bg-white rounded-lg shadow-md border border-gray-300 m-2 p-2">
                    <header class="p-4 mb-4 border-b border-gray-300">
                        <h1 class="text-xl font-bold"><%= product.title %></h1>
                    </header>

                    <div class="flex justify-center">
                        <img src="/<%= product.image %>" alt="<%= product.title %>" class="w-80 h-80 object-cover">
                    </div>

                    <div class="p-4 bg-gray-100 rounded-md my-4">
                        <h2 class="text-lg font-bold"><%= product.price.toLocaleString() %> KRW</h2>
                        <p class=""><%= product.description %></p>
                    </div>

                    <footer class="p-4 rounded-md flex justify-between">
                        <a href="/product/<%= product._id %>"
                           class="bg-green-700 text-white px-4 font-bold py-2 rounded">View</a>
                        <% if (isAuthenticated) { %>
                            <%- include('includes/add-to-cart-button.ejs', {product: product}) %>
                        <% } %>
                    </footer>

                </article>
            <% } %>
        </div>
        <%- include('includes/pagination.ejs', {
        currentPage: currentPage,
        pageStart: pageStart,
        pageEnd: pageEnd,
        totalPage: totalPage,
        url: path
        }) %>
    <% } else { %>
        <div class="flex justify-center items-center h-screen">
            <h1 class="text-2xl font-bold">No products found.</h1>
        </div>
    <% } %>
</main>

<%- include('includes/footer.ejs') %>